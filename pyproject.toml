# ============================================
# pyproject.toml - Project Configuration
# ============================================
# Configuration for Ruff linter and other Python tools.
# See: https://docs.astral.sh/ruff/configuration/
# ============================================

[project]
name = "fbscrapeideas"
version = "0.8.2"
description = "CLI app for scraping Facebook groups with AI-powered categorization"
requires-python = ">=3.11"

[tool.ruff]
# Target Python 3.11
target-version = "py311"

# Line length (match common standard)
line-length = 100

# Exclude common directories
exclude = [
    ".git",
    ".github",
    ".ruff_cache",
    ".venv",
    "venv",
    "__pycache__",
    "*.pyc",
    "build",
    "dist",
    "*.egg-info",
    "memory-bank",
]

[tool.ruff.lint]
# Enable recommended rules
# E = pycodestyle errors
# F = Pyflakes
# I = isort (import sorting)
# W = pycodestyle warnings
# UP = pyupgrade (Python version upgrades)
# B = flake8-bugbear (common bugs)
# SIM = flake8-simplify
select = [
    "E",      # pycodestyle errors
    "F",      # Pyflakes
    "I",      # isort
    "W",      # pycodestyle warnings
    "UP",     # pyupgrade
    "B",      # flake8-bugbear
]

# Ignore specific rules that may conflict with existing code
ignore = [
    "E501",   # Line too long (handled by formatter)
    "E402",   # Module level import not at top of file (sometimes needed)
    "F401",   # Imported but unused (may be intentional re-exports)
    "B008",   # Do not perform function calls in argument defaults
]

# Allow autofix for all enabled rules
fixable = ["ALL"]
unfixable = []

[tool.ruff.lint.per-file-ignores]
# Allow unused imports in __init__.py files (re-exports)
"__init__.py" = ["F401"]
# Allow more flexibility in test files
"tests/*" = ["B", "E501"]

[tool.ruff.lint.isort]
# Match existing import style
known-first-party = ["ai", "cli", "database", "export", "scraper"]
section-order = ["future", "standard-library", "third-party", "first-party", "local-folder"]

[tool.ruff.format]
# Use double quotes (Python standard)
quote-style = "double"

# Use spaces for indentation
indent-style = "space"

# Unix-style line endings
line-ending = "lf"

[tool.semantic_release]
version_variables = ["version.py:__version__"]
version_toml = ["pyproject.toml:project.version"]
branches.master = { match = "master" }
commit_parser = "emoji"
logging_use_named_masks = true
major_on_zero = true
upload_to_release = false
upload_to_repository = false
commit_message = "{version} [skip ci]"
# Allow releases on any commit type - all unmatched commits bump patch
allow_zero_version = true

[tool.semantic_release.commit_parser_options]
major_tags = ["ğŸš¨", "ğŸ’¥"]
minor_tags = ["âœ¨", "ğŸ‰"]
patch_tags = [
    "ğŸ›", "ğŸ”’", "ğŸ› ", "âš¡ï¸", "ğŸ“š", "ğŸ—", "â™»ï¸", "ğŸš¦", "ğŸ¨", "ğŸ“¦", "ğŸ”–",
    "ğŸš€", "ğŸ”§", "ğŸ“", "ğŸ”„", "ğŸ’¡", "ğŸ”¥", "ğŸ’„", "ğŸ©¹", "ğŸ”¨", "âœï¸",
    "ğŸŒ", "ğŸ’¬", "ğŸ—ƒï¸", "ğŸ”Š", "ğŸ”‡", "ğŸ‘¥", "ğŸš¸", "ğŸ·ï¸", "ğŸŒ±", "ğŸš©",
    "ğŸ¥…", "ğŸ’«", "ğŸ—‘ï¸", "ğŸ›‚", "ğŸ©º", "ğŸ§±", "ğŸ§‘â€ğŸ’»", "ğŸ’¸", "ğŸ§µ", "ğŸ¦º"
]
# Default to patch bump for any commit that doesn't match emoji patterns
default_bump_level = 1

